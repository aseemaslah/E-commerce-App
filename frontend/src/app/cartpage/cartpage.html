<app-navbar></app-navbar>

<section class="py-5 bg-white">
  <div class="container">
    <div class="d-flex align-items-center justify-content-between border-bottom pb-2 mb-4">
      <h3 class="fw-bold text-primary mb-0">Your Shopping Cart</h3>
      <span class="text-muted small">{{cart.length}} Item</span>
    </div>
    <div class="card shadow-sm border-0 mb-3 bg-light">
      @for (carts of cart; track carts.id) {
      <div class="card-body d-flex align-items-center justify-content-between flex-wrap py-3">
        <div class="d-flex align-items-center flex-grow-1" style="min-width: 260px;">
          <img src="{{carts.image}}" class="img-thumbnail me-3" style="height: 90px; width: 90px;">
          <div>
            <h5 class="mb-1">{{carts.name | slice:0:30}}</h5>
            <p class="text-primary mb-0 fw-semibold">{{ carts.price | currency : "USD"}} / Nos</p>
          </div>
        </div>
        <div class="d-flex align-items-center justify-content-center" style="width: 160px;">
          <button class="btn btn-sm btn-light me-2" (click)="decreaseQty(carts)">
            <i class="bi bi-dash-circle text-primary"></i>
          </button>
          <span class="fw-semibold">{{carts.quantity}}</span>
          <button class="btn btn-sm btn-light ms-2" (click)="increaseQty(carts)">
            <i class="bi bi-plus-circle text-primary"></i>
          </button>
        </div>
        <div class="text-center fw-bold text-primary" style="width: 160px;">
          Total: {{ (carts.price * carts.quantity) | currency : "USD" }}
        </div>
        <div class="d-flex flex-column gap-2">
          <button class="btn btn-sm btn-outline-dark " (click)="deleteCart(carts.productId)">
            <i class="bi bi-trash "></i>
          </button>
        </div>
      </div>
      }
      @empty {
      <div class="card-body">
        <h5 class="text-center text-muted">Your cart is empty.</h5>
      </div>
      }
    </div>
    <div class="d-flex justify-content-end mt-4 ">
      <h5 class="fw-bold text-primary">Total: {{ calculateTotal() | currency}}</h5>
    </div>
    <div class="col-12 d-flex justify-content-end mt-4">
      @if (!isLoggedIn) {
        <button type="button" class="btn btn-primary text-white me-3 fw-semibold"  data-bs-toggle="modal" 
        data-bs-target="#myModal">
          Make It Yours
        </button>
        } @else {
          <button type="button" class="btn btn-primary text-white me-3 fw-semibold" (click)="goToCheckout()">
          Make It Yours
        </button>}
        
      <button type="button" class="btn btn-outline-danger px-4" routerLink="/home">Continue Shopping</button>
    </div>
  </div>
</section>

<app-footer></app-footer>